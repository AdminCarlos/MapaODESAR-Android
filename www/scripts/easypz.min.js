/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/easypz@1.1.12/easypz.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _this=this;function sign(t){return t<0?-1:t>0?1:0}var EasyPZLoader=function(){function t(){this.easyPzElements=[]}return t.getSettingsFromString=function(e){var o={onPanned:function(){},onZoomed:function(){},onTransformed:function(){},onResetAbsoluteScale:function(){},options:{},modes:t.DEFAULT_MODES,applyTransformTo:"",replaceVariables:!1,modeSettings:{}};window.onPanned&&(o.onPanned=window.onPanned),window.onZoomed&&(o.onZoomed=window.onZoomed),window.onTransformed&&(o.onTransformed=window.onTransformed),window.onResetAbsoluteScale&&(o.onResetAbsoluteScale=window.onResetAbsoluteScale);var n={};try{n=e&&e.length?JSON.parse(e):{applyTransformTo:"svg > *"}}catch(t){console.error('Could not parse EasyPZ settings: "'+e+'"'),console.log(t)}for(var s=0,a=["options","modes","onPanned","onZoomed","onTransformed","onResetAbsoluteScale","applyTransformTo","modeSettings"];s<a.length;s++){var i=a[s];n[i]&&(o[i]=n[i],"on"===i.substr(0,2)&&(o[i]=window[o[i]]))}return n.replaceVariables&&(o.replaceVariables=!!n.replaceVariables),o},t.prototype.checkElements=function(){for(var e=Array.from(document.querySelectorAll("[easypz]")).concat(Array.from(document.querySelectorAll("[data-easypz]"))),o=this.easyPzElements.map(function(t){return t.element}),n=0;n<e.length;n++){var s=e[n],a=s.getAttribute("easypz")||s.dataset.easypz,i=o.indexOf(s),r=-1===o.indexOf(s)?null:this.easyPzElements[i];if(r){if(r.settings===a)continue;console.log("Modifying EasyPZ")}else console.log("Adding EasyPZ");var c=[],u=function(){},l=function(){},m=function(){},d=function(){},h={},f="",v={};try{var M=t.getSettingsFromString(a);c=M.modes,u=M.onPanned,l=M.onZoomed,m=M.onTransformed,d=M.onResetAbsoluteScale,f=M.applyTransformTo,h=M.options,v=M.modeSettings}catch(t){console.error(t)}if(r)r.settings=a,r.easypz.setSettings(m,h,c,v,u,l,d,f);else{var P=new EasyPZ(s,m,h,c,v,u,l,d,f);this.easyPzElements.push({element:s,settings:a,easypz:P})}}},t.DEFAULT_MODES=["SIMPLE_PAN","HOLD_ZOOM_IN","CLICK_HOLD_ZOOM_OUT","WHEEL_ZOOM_EASE","PINCH_ZOOM","DBLCLICK_ZOOM_IN","DBLRIGHTCLICK_ZOOM_OUT"],t}(),EzEventEmitter=function(){function t(){this.subscribers=[]}return t.prototype.emit=function(t){this.subscribers.forEach(function(e){e(t)})},t.prototype.subscribe=function(t){this.subscribers.push(t)},t}(),EzPromise=function(){function t(t){var e=this;t(function(t){e.resolve(t)},function(t){e.resolve(t)})}return t.prototype.then=function(t){this.onDone=t},t.prototype.resolve=function(t){this.onDone&&this.onDone(t)},t}(),EasyPzZoomData=function(){return function(){}}(),EasyPzPanData=function(){return function(){}}(),EasyPzCallbackData=function(){return function(){}}(),EasyPzMode=function(){return function(){}}(),EasyPZ=function(){function t(t,e,o,n,s,a,i,r,c){void 0===e&&(e=function(){}),void 0===s&&(s={}),void 0===a&&(a=function(){}),void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),void 0===c&&(c=""),this.applyTransformTo=c,this.lastMouseDownTime=0,this.mouseDownTime=0,this.mouseMoveTime=0,this.mouseUpTime=0,this.lastMousePos={x:0,y:0},this.numberOfPointers=0,this.mousePos={x:0,y:0},this.afterMouseMovedCallbacks=[],this.height=0,this.width=0,this.lastTouchEvent=0,this.enabledModes=["SIMPLE_PAN","HOLD_ZOOM_IN","CLICK_HOLD_ZOOM_OUT","WHEEL_ZOOM","PINCH_ZOOM","DBLCLICK_ZOOM_IN","DBLRIGHTCLICK_ZOOM_OUT"],this.onPanned=new EzEventEmitter,this.onZoomed=new EzEventEmitter,this.resetAbsoluteScale=new EzEventEmitter,this.totalTransform={scale:1,translateX:0,translateY:0},this.totalTransformSnapshot={scale:1,translateX:0,translateY:0},this.options={minScale:.25,maxScale:12,bounds:{top:-150,right:150,bottom:150,left:-150}},this.listeners={mousedown:this.onMouseDown.bind(this),mousemove:this.onMouseMove.bind(this),touchmove:this.onTouchMove.bind(this),mouseup:this.onMouseUp.bind(this),mouseout:this.onMouseOut.bind(this),touchend:this.onTouchEnd.bind(this),contextmenu:this.onContextMenu.bind(this),wheel:this.onWheel.bind(this)},this.lastAppliedTransform={translateX:0,translateY:0,scale:1},this.modes=[],this.el=t instanceof Node?t:t.node(),this.setSettings(e,o,n,s,a,i,r,c),this.ngAfterViewInit(),this.setupHostListeners()}return t.prototype.setSettings=function(e,o,n,s,a,i,r,c){var u=this;void 0===e&&(e=function(){}),void 0===s&&(s={}),void 0===a&&(a=function(){}),void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),void 0===c&&(c=""),n&&(this.enabledModes=n),this.modes=t.modes.map(function(t){return t(u)}),this.onPanned=new EzEventEmitter,this.onZoomed=new EzEventEmitter,this.resetAbsoluteScale=new EzEventEmitter,this.applyModeSettings(s),o&&(void 0!==o.minScale&&(this.options.minScale=o.minScale),void 0!==o.maxScale&&(this.options.maxScale=o.maxScale),void 0!==o.bounds&&(this.options.bounds=o.bounds));var l=!c;this.trackTotalTransformation(e,a,i,l),this.resetAbsoluteScale.subscribe(function(){return u.saveCurrentTransformation(r)}),this.onPanned.subscribe(function(){return u.applyTransformation()}),this.onZoomed.subscribe(function(){return u.applyTransformation()})},t.prototype.saveCurrentTransformation=function(t){this.totalTransformSnapshot={scale:this.totalTransform.scale,translateX:this.totalTransform.translateX,translateY:this.totalTransform.translateY},t()},t.prototype.trackTotalTransformation=function(t,e,o,n){var s=this;this.onPanned.subscribe(function(o){n?(s.totalTransform.translateX+=o.x,s.totalTransform.translateY+=o.y):(s.totalTransform.translateX+=o.x/s.totalTransform.scale,s.totalTransform.translateY+=o.y/s.totalTransform.scale),s.ensureTransformWithinBounds(n),e(o,s.totalTransform),t(s.totalTransform)}),this.onZoomed.subscribe(function(e){var a=e.scaleChange?e.scaleChange:1,i=e.absoluteScaleChange?s.totalTransformSnapshot:s.totalTransform,r=e.absoluteScaleChange?1/e.absoluteScaleChange:1/a,c=e.absoluteScaleChange?s.totalTransformSnapshot.scale:s.totalTransform.scale;if(s.totalTransform.scale=s.getScaleWithinLimits(i.scale*r),r=s.totalTransform.scale/c,n)s.totalTransform.translateX=(i.translateX-e.x)/c*s.totalTransform.scale+e.x,s.totalTransform.translateY=(i.translateY-e.y)/c*s.totalTransform.scale+e.y,e.targetX&&e.targetY&&(s.totalTransform.translateX+=(e.targetX-e.x)/c*s.totalTransform.scale,s.totalTransform.translateY+=(e.targetY-e.y)/c*s.totalTransform.scale);else{var u={x:e.x,y:e.y},l={x:u.x*r,y:u.y*r},m={x:l.x-u.x,y:l.y-u.y};s.totalTransform.translateX=i.translateX-m.x/s.totalTransform.scale,s.totalTransform.translateY=i.translateY-m.y/s.totalTransform.scale,e.targetX&&e.targetY&&(s.totalTransform.translateX+=(e.targetX-e.x)/s.totalTransform.scale,s.totalTransform.translateY+=(e.targetY-e.y)/s.totalTransform.scale)}s.ensureTransformWithinBounds(n),o(e,s.totalTransform),t(s.totalTransform)})},t.prototype.getScaleWithinLimits=function(t){return isNaN(this.options.minScale)||null===this.options.minScale||(t=t>this.options.minScale?t:this.options.minScale),isNaN(this.options.maxScale)||null===this.options.maxScale||(t=t<this.options.maxScale?t:this.options.maxScale),t},t.prototype.ensureTransformWithinBounds=function(t){if(this.options.bounds){var e=t?this.totalTransform.scale-1:1-1/this.totalTransform.scale,o=-1*Math.max(e,0),n=-1*Math.min(e,0);this.totalTransform.translateX<o*this.width+this.options.bounds.left&&(this.totalTransform.translateX=o*this.width+this.options.bounds.left),this.totalTransform.translateX>n*this.width+this.options.bounds.right&&(this.totalTransform.translateX=n*this.width+this.options.bounds.right),this.totalTransform.translateY<o*this.height+this.options.bounds.top&&(this.totalTransform.translateY=o*this.height+this.options.bounds.top),this.totalTransform.translateY>n*this.height+this.options.bounds.bottom&&(this.totalTransform.translateY=n*this.height+this.options.bounds.bottom)}},t.prototype.applyTransformation=function(){if(this.applyTransformTo){for(var e=this.el.querySelectorAll(this.applyTransformTo),o=0;o<e.length;o++){var n=e[o],s=n.getAttribute("transform")||"",a=t.parseTransform(s),i=this.totalTransform.translateX,r=this.totalTransform.translateY,c=this.totalTransform.scale,u=this.totalTransform.scale;if(a){var l=a.scaleX/this.lastAppliedTransform.scale,m=a.scaleY/this.lastAppliedTransform.scale,d={x:0,y:0},h=a.translateBeforeScale?1:l,f=a.translateBeforeScale?1:m;d.x=(a.translateX-this.lastAppliedTransform.translateX/l)*h,d.y=(a.translateY-this.lastAppliedTransform.translateY/m)*f,c*=l,u*=m,i=i/l+d.x/l,r=r/m+d.y/m}else console.log("what is wrong",s);var v="";a.rotate&&(v+="rotate("+a.rotate+")"),a.skewX&&(v+="skewX("+a.skewX+")"),a.skewY&&(v+="skewY("+a.skewY+")"),v+="scale("+c+","+u+")",v+="translate("+i+","+r+")",n.setAttribute("transform",v)}this.lastAppliedTransform.translateX=this.totalTransform.translateX,this.lastAppliedTransform.translateY=this.totalTransform.translateY,this.lastAppliedTransform.scale=this.totalTransform.scale}},t.parseTransform=function(t){var e={translateX:0,translateY:0,scaleX:1,scaleY:1,translateBeforeScale:!1,rotate:"",skewX:"",skewY:""};if(t){t=t.replace(/(\r\n|\n|\r)/gm,"");var o=!1,n=/\s*translate\(([-0-9.]+),\s*([-0-9.]+)\)/.exec(t);n&&(e.translateX=parseFloat(n[1]),e.translateY=parseFloat(n[2]),o=!0);var s=/\s*scale\(([-0-9.]+)(,\s*([-0-9.]+))?\)/.exec(t);s&&(e.scaleX=parseFloat(s[1]),e.scaleY=s[3]?parseFloat(s[3]):parseFloat(s[1]),o=!0),/\s*translate\(([-0-9.]+),\s*([-0-9.]+)\)[ ]*scale\(([-0-9.]+(,\s*[-0-9.]+)?)\)/.exec(t)&&(e.translateBeforeScale=!0);var a=/\s*rotate\(([-0-9., ]*)\)/.exec(t);a&&(e.rotate=a[1],o=!0);var i=/\s*skewX\(([-0-9., ]*)\)/.exec(t);i&&(e.skewX=i[1],o=!0);var r=/\s*skewY\(([-0-9., ]*)\)/.exec(t);r&&(e.skewY=r[1],o=!0),o||console.error("No transformation recognized in: ",t)}return e},t.prototype.ngAfterViewInit=function(){this.setDimensions()},t.prototype.setDimensions=function(){var t=this.el.getBoundingClientRect();this.width=t.width,this.height=t.height},t.prototype.updateMousePosition=function(t){var e=this.getMousePosition(t);e&&(this.mousePos=e)},t.prototype.getMousePosition=function(t){var e={x:0,y:0};if("mouse"===t.type.substr(0,5)&&t.clientX)e={x:t.clientX,y:t.clientY},this.numberOfPointers=1;else if("touch"===t.type.substr(0,5)){var o=t.touches?t.touches:[];if(this.numberOfPointers=o.length,o.length<1)return null;e={x:o[0].clientX,y:o[0].clientY}}return this.getRelativePosition(e.x,e.y)},t.prototype.getRelativePosition=function(t,e){var o=this.el.getBoundingClientRect();return this.width=o.width,this.height=o.height,{x:t-o.left,y:e-o.top}},t.prototype.onMouseTouchDown=function(e,o){this.lastMouseDownTime=this.mouseDownTime,this.lastMousePos={x:this.mousePos.x,y:this.mousePos.y},this.mouseDownTime=Date.now();var n=e||o;if(!n)return console.error("no event!");this.updateMousePosition(n);var s=t.MOUSE_EVENT_TYPES.MOUSE_DOWN;this.onMouseTouchEvent(s,n)},t.prototype.setupHostListeners=function(){for(var t=0,e=Object.entries(this.listeners);t<e.length;t++){var o=e[t],n=o[0],s=o[1];this.el.addEventListener(n,s)}},t.prototype.removeHostListeners=function(){for(var t=0,e=Object.entries(this.listeners);t<e.length;t++){var o=e[t],n=o[0],s=o[1];this.el.removeEventListener(n,s)}},t.prototype.onMouseDown=function(e){Date.now()-this.lastTouchEvent>t.TOUCH_TO_COMPUTER_SWITCH_TIME_MS&&this.onMouseTouchDown(e)},t.prototype.onTouchStart=function(e){this.lastTouchEvent=Date.now();var o=t.MOUSE_EVENT_TYPES.MOUSE_DOWN;1==e.touches.length?this.onMouseTouchDown(null,e):2==e.touches.length&&(this.updateMousePosition(e),this.onMultiTouchEvent(o,e),e.preventDefault())},t.prototype.onMouseTouchMove=function(e,o){this.mouseMoveTime=Date.now(),this.lastMousePos={x:this.mousePos.x,y:this.mousePos.y};var n=e||o;if(!n)return console.error("no event"),!1;this.updateMousePosition(n);for(var s=t.MOUSE_EVENT_TYPES.MOUSE_MOVE,a=this.onMouseTouchEvent(s,n),i=0,r=this.afterMouseMovedCallbacks;i<r.length;i++){(0,r[i])()}return a},t.prototype.onMouseMove=function(t){this.onMouseTouchMove(t)},t.prototype.onTouchMove=function(e){if(1==e.touches.length)this.onMouseTouchMove(null,e)&&e.preventDefault();else if(2==e.touches.length){this.updateMousePosition(e);var o=t.MOUSE_EVENT_TYPES.MOUSE_MOVE;this.onMultiTouchEvent(o,e),e.preventDefault()}},t.addMode=function(e){t.modes.push(e)},t.prototype.getEventData=function(t,e){return{event:t,modeName:e}},t.prototype.getActiveModes=function(){var t=this,e=[];return this.modes.forEach(function(o){o.ids.forEach(function(n){-1!==t.enabledModes.indexOf(n)&&e.push({mode:o,activeId:n})})}),e},t.prototype.onMultiTouchEvent=function(e,o){var n=this;this.getActiveModes().forEach(function(s){e===t.MOUSE_EVENT_TYPES.MOUSE_MOVE&&s.mode.onMove?s.mode.onMove(n.getEventData(o,s.activeId)):e===t.MOUSE_EVENT_TYPES.MOUSE_DOWN&&s.mode.onClickTouch?s.mode.onClickTouch(n.getEventData(o,s.activeId)):e===t.MOUSE_EVENT_TYPES.MOUSE_UP&&s.mode.onClickTouchEnd&&s.mode.onClickTouchEnd(n.getEventData(o,s.activeId))})},t.prototype.onMouseTouchUp=function(e,o){this.mouseUpTime=Date.now(),this.lastMousePos={x:this.mousePos.x,y:this.mousePos.y};var n=e||o;if(!n)return console.error("no event");this.updateMousePosition(n);var s=t.MOUSE_EVENT_TYPES.MOUSE_UP;this.onMouseTouchEvent(s,n)},t.prototype.onMouseTouchEvent=function(e,o){var n=this,s=!1;return t.isRightClick(o)?(e===t.MOUSE_EVENT_TYPES.MOUSE_DOWN&&this.onRightClick(e,o),s):(this.getActiveModes().forEach(function(a){e===t.MOUSE_EVENT_TYPES.MOUSE_MOVE&&a.mode.onMove?a.mode.onMove(n.getEventData(o,a.activeId)):e===t.MOUSE_EVENT_TYPES.MOUSE_DOWN&&a.mode.onClickTouch?a.mode.onClickTouch(n.getEventData(o,a.activeId)):e===t.MOUSE_EVENT_TYPES.MOUSE_UP&&a.mode.onClickTouchEnd&&a.mode.onClickTouchEnd(n.getEventData(o,a.activeId)),s=!0}),s)},t.prototype.onMouseUp=function(e){Date.now()-this.lastTouchEvent>t.TOUCH_TO_COMPUTER_SWITCH_TIME_MS&&this.onMouseTouchUp(e)},t.prototype.onMouseOut=function(t){var e=this.getMousePosition(t);e&&(e.x<0||e.x>this.width||e.y<0||e.y>this.height)&&this.onMouseTouchUp(t)},t.prototype.onTouchEnd=function(e){this.lastTouchEvent=Date.now();var o=t.MOUSE_EVENT_TYPES.MOUSE_UP;this.onMouseTouchUp(null,e),this.onMultiTouchEvent(o,e)},t.prototype.onContextMenu=function(){},t.prototype.onWheel=function(t){var e=this,o=!1;this.getActiveModes().forEach(function(n){n.mode.onWheel&&(n.mode.onWheel(e.getEventData(t,n.activeId)),o=!0)}),o&&t.preventDefault()},t.prototype.onRightClick=function(t,e){var o=this;this.getActiveModes().forEach(function(t){t.mode.onRightClick&&t.mode.onRightClick(o.getEventData(e,t.activeId))})},t.prototype.applyModeSettings=function(t){void 0===t&&(t={});var e=Object.keys(t);if(e&&e.length)for(var o=function(e){var o=n.modes.filter(function(t){return-1!==t.ids.indexOf(e)});if(1!==o.length)console.error("Trying to set a setting for an easypz mode that does not exist",e);else{var s=o[0],a=t[e];for(var i in a)s.settings[i]?s.settings[i]=a[i]:console.error("Trying to set a setting for the easypz mode ",e,", but this setting does not exist: ",i)}},n=this,s=0,a=e;s<a.length;s++){o(a[s])}},t.easeInteraction=function(e,o,n){return t.momentumInteraction(n,function(t){return e-Math.pow(t-o/2,2)/(Math.pow(o,2)/(4*e))},o)},t.frictionInteraction=function(e,o,n){return t.momentumInteraction(n,function(t){return Math.max(0,e-o*t)},e/o)},t.momentumInteraction=function(t,e,o){var n=Date.now(),s=Date.now(),a=function(){var i=Date.now()-n,r=e(i);if(i<o){var c=Date.now()-s;t({speed:r,timePassed:c,dist:c*r}),s=Date.now(),requestAnimationFrame(a)}};return{start:function(){requestAnimationFrame(a)},stop:function(){n=0}}},t.momentumInteractionOld=function(t,e,o){var n=Date.now(),s=Date.now(),a=function(){var i=Date.now()-n,r=e(i);if(i<o){var c=(Date.now()-s)*r;t(c),s=Date.now(),requestAnimationFrame(a)}};return{start:function(){requestAnimationFrame(a)},stop:function(){n=0}}},t.isRightClick=function(t){return t instanceof MouseEvent&&!!t.clientX&&("which"in t&&3===t.which||"button"in t&&2===t.button)},t.getPositionDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.prototype.callbackAfterTimeoutOrMovement=function(e,o){var n=this;return new EzPromise(function(s){var a=!1,i={x:n.mousePos.x,y:n.mousePos.y},r=n.afterMouseMovedCallbacks.length;n.afterMouseMovedCallbacks.push(function(){var e=t.getPositionDistance(i,n.mousePos);e>o&&!a&&(n.afterMouseMovedCallbacks.splice(r,1),a=!0,s(e))}),setTimeout(function(){if(!a){var e=t.getPositionDistance(i,n.mousePos);n.afterMouseMovedCallbacks.splice(r,1),a=!0,s(e)}},e)})},t.MOUSE_EVENT_TYPES={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2},t.TOUCH_TO_COMPUTER_SWITCH_TIME_MS=500,t.DIMENSIONS=["x","y"],t.modes=[],t}();EasyPZ.addMode(function(t){var e={ids:["SIMPLE_PAN"],settings:{minDistance:3,delay:300},active:!1,data:{lastPosition:{x:0,y:0}},onClickTouch:function(){e.active=!1,e.data.lastPosition={x:t.mousePos.x,y:t.mousePos.y},t.callbackAfterTimeoutOrMovement(e.settings.delay,e.settings.minDistance).then(function(o){e.active=t.mouseUpTime<t.mouseDownTime&&o>=e.settings.minDistance})},onMove:function(){if(e.active){var o=t.mousePos.x-e.data.lastPosition.x,n=t.mousePos.y-e.data.lastPosition.y;t.onPanned.emit({x:o,y:n}),e.data.lastPosition={x:t.mousePos.x,y:t.mousePos.y}}},onClickTouchEnd:function(){e.active=!1}};return e}),EasyPZ.addMode(function(t){var e={ids:["FLICK_PAN"],settings:{minDistance:3,delay:300,friction:.005},active:!1,data:{continueTime:0,positions:[],momentum:null},onClickTouch:function(){e.active=!1,e.data.positions=[{x:t.mousePos.x,y:t.mousePos.y,time:Date.now()}],e.data.momentum&&e.data.momentum.stop(),t.callbackAfterTimeoutOrMovement(e.settings.delay,e.settings.minDistance).then(function(o){e.active=t.mouseUpTime<t.mouseDownTime&&o>=e.settings.minDistance})},onMove:function(){if(e.active){var o=t.mousePos.x-t.lastMousePos.x,n=t.mousePos.y-t.lastMousePos.y;t.onPanned.emit({x:o,y:n}),e.data.positions.push({x:t.mousePos.x,y:t.mousePos.y,time:Date.now()})}},onClickTouchEnd:function(){if(e.active){e.active=!1;var o=e.data.positions.filter(function(t){return t.time>=Date.now()-100&&t.time<=Date.now()-50});if(0==o.length)return;var n=o[0],s=EasyPZ.getPositionDistance({x:n.x,y:n.y},t.mousePos),a={x:(t.mousePos.x-n.x)/s,y:(t.mousePos.y-n.y)/s},i=s/(Date.now()-n.time);e.data.momentum=EasyPZ.frictionInteraction(i,e.settings.friction,function(e){var o=e.dist,n={x:a.x*o,y:a.y*o};t.onPanned.emit(n)}),e.data.momentum.start()}}};return e}),EasyPZ.addMode(function(t){var e={ids:["HOLD_ZOOM_IN","HOLD_ZOOM_OUT","CLICK_HOLD_ZOOM_IN","CLICK_HOLD_ZOOM_OUT"],settings:{maxDistance:3,delay:350,zoomInScaleChangePerMs:-.0015,zoomOutScaleChangePerMs:.003,doubleClickTimeout:300},active:!1,data:{zoomingOut:!1,zoomPos:{x:0,y:0}},onClickTouch:function(o){var n,s=function(){if(e.active){var o=Date.now()-n,a=1+(e.data.zoomingOut?e.settings.zoomOutScaleChangePerMs:e.settings.zoomInScaleChangePerMs)*o;t.onZoomed.emit({x:e.data.zoomPos.x,y:e.data.zoomPos.y,scaleChange:a}),n=Date.now(),requestAnimationFrame(s)}};t.callbackAfterTimeoutOrMovement(e.settings.delay,e.settings.maxDistance).then(function(a){if(e.active=t.mouseUpTime<t.mouseDownTime&&a<=e.settings.maxDistance,e.active){n=Date.now();var i=t.mouseDownTime-t.lastMouseDownTime<e.settings.doubleClickTimeout;e.data.zoomPos={x:t.mousePos.x,y:t.mousePos.y},i==("CLICK_HOLD_ZOOM_IN"===o.modeName||"CLICK_HOLD_ZOOM_OUT"===o.modeName)&&(e.data.zoomingOut="HOLD_ZOOM_OUT"===o.modeName||"CLICK_HOLD_ZOOM_OUT"===o.modeName,s())}})},onMove:function(){e.active&&(e.data.zoomPos={x:t.mousePos.x,y:t.mousePos.y})},onClickTouchEnd:function(){e.active=!1}};return e}),EasyPZ.addMode(function(t){var e={ids:["DBLCLICK_ZOOM_IN","DBLCLICK_ZOOM_OUT","DBLRIGHTCLICK_ZOOM_IN","DBLRIGHTCLICK_ZOOM_OUT"],settings:{dblClickTime:300,zoomInScaleChange:.33,zoomOutScaleChange:3,maxHoldTime:200},onClickTouchEnd:function(o){var n=t.mouseDownTime-t.lastMouseDownTime<e.settings.dblClickTime,s=t.mouseUpTime-t.mouseDownTime>e.settings.maxHoldTime,a="DBLCLICK"===o.modeName.substr(0,"DBLCLICK".length);if(n&&!s&&a){var i="DBLCLICK_ZOOM_OUT"===o.modeName?e.settings.zoomOutScaleChange:e.settings.zoomInScaleChange;t.onZoomed.emit({x:t.mousePos.x,y:t.mousePos.y,scaleChange:i})}},onRightClick:function(o){var n=t.mouseDownTime-t.lastMouseDownTime<e.settings.dblClickTime,s=t.mouseUpTime-t.mouseDownTime>e.settings.maxHoldTime,a="DBLRIGHTCLICK"===o.modeName.substr(0,"DBLRIGHTCLICK".length);if(n&&!s&&a){var i="DBLRIGHTCLICK_ZOOM_OUT"===o.modeName?e.settings.zoomOutScaleChange:e.settings.zoomInScaleChange;t.onZoomed.emit({x:t.mousePos.x,y:t.mousePos.y,scaleChange:i})}}};return e}),EasyPZ.addMode(function(t){var e={ids:["WHEEL_ZOOM","WHEEL_ZOOM_MOMENTUM","WHEEL_ZOOM_EASE"],settings:{zoomInScaleChange:.8,zoomOutScaleChange:1.2,momentumSpeedPercentage:.01,momentumFriction:4e-6,easeDuration:300},onWheel:function(o){var n=o.event.wheelDelta?o.event.wheelDelta:-1*o.event.deltaY,s=n/Math.abs(n)>0?e.settings.zoomInScaleChange:e.settings.zoomOutScaleChange,a=1-s,i=Math.abs(a)*e.settings.momentumSpeedPercentage,r=sign(a);"WHEEL_ZOOM_EASE"===o.modeName?(_this.zoomMomentum=EasyPZ.easeInteraction(i,e.settings.easeDuration,function(e){var o=e.dist,n=1-r*o;t.onZoomed.emit({x:t.mousePos.x,y:t.mousePos.y,scaleChange:n})}),_this.zoomMomentum.start()):(t.onZoomed.emit({x:t.mousePos.x,y:t.mousePos.y,scaleChange:s}),"WHEEL_ZOOM_MOMENTUM"===o.modeName&&(_this.flickMomentum=EasyPZ.frictionInteraction(i,e.settings.momentumFriction,function(e){var o=e.dist,n=1-r*o;t.onZoomed.emit({x:t.mousePos.x,y:t.mousePos.y,scaleChange:n})}),_this.flickMomentum.start()))}};return e}),EasyPZ.addMode(function(t){var e={ids:["PINCH_ZOOM","PINCH_ZOOM_QUADRATIC","PINCH_ZOOM_POWER_FOUR","PINCH_ZOOM_MOMENTUM","PINCH_PAN"],settings:{friction:1e-5},data:{momentum:null,posStart1:null,posStart2:null,references:[],zoomPos:{x:0,y:0},zoomCenterPos:{x:0,y:0}},onClickTouch:function(o){e.data.momentum&&e.data.momentum.stop(),e.data.references=[],o.event.touches&&o.event.touches.length>1&&(e.data.posStart1=t.getRelativePosition(o.event.touches[0].clientX,o.event.touches[0].clientY),e.data.posStart2=t.getRelativePosition(o.event.touches[1].clientX,o.event.touches[1].clientY),t.resetAbsoluteScale.emit(null))},onMove:function(o){if(e.data.posStart1&&e.data.posStart2){var n=t.getRelativePosition(o.event.touches[0].clientX,o.event.touches[0].clientY),s=t.getRelativePosition(o.event.touches[1].clientX,o.event.touches[1].clientY),a=EasyPZ.getPositionDistance(e.data.posStart1,e.data.posStart2)/EasyPZ.getPositionDistance(n,s),i=1;"PINCH_ZOOM_QUADRATIC"===o.modeName&&(i=2),"PINCH_ZOOM_POWER_FOUR"===o.modeName&&(i=4),"PINCH_PAN"===o.modeName&&(i=0);var r=Math.pow(a,i);e.data.references.push({time:Date.now(),scale:r}),e.data.zoomPos={x:(e.data.posStart1.x+e.data.posStart2.x)/2,y:(e.data.posStart1.y+e.data.posStart2.y)/2},e.data.zoomCenterPos={x:(n.x+s.x)/2,y:(n.y+s.y)/2},t.onZoomed.emit({x:e.data.zoomPos.x,y:e.data.zoomPos.y,absoluteScaleChange:r,targetX:e.data.zoomCenterPos.x,targetY:e.data.zoomCenterPos.y})}},onClickTouchEnd:function(o){var n=this;if(e.data.posStart1=null,e.data.posStart1=null,"PINCH_ZOOM_MOMENTUM"===o.modeName&&e.data.references.length>5){var s=e.data.references[e.data.references.length-1],a=e.data.references[e.data.references.length-4],i=s.time-a.time,r=s.scale-a.scale,c=s.scale,u=r/i,l=Math.abs(u),m=sign(u);e.data.momentum=EasyPZ.frictionInteraction(l,e.settings.friction,function(e){var o=e.dist,s=c+m*o;t.onZoomed.emit({x:n.pinchZoomPos.x,y:n.pinchZoomPos.y,absoluteScaleChange:s,targetX:n.pinchZoomCenterPos.x,targetY:n.pinchZoomCenterPos.y}),c=s}),e.data.momentum.start()}}};return e}),EasyPZ.addMode(function(t){var e={ids:["WHEEL_PAN_X","WHEEL_PAN_Y"],settings:{speed:50},onWheel:function(o){var n=o.event.wheelDelta?o.event.wheelDelta:-1*o.event.deltaY,s=n/Math.abs(n)>0?1:-1,a={x:0,y:0};a["WHEEL_PAN_X"===o.modeName?"x":"y"]=e.settings.speed*s,t.onPanned.emit(a)}};return e}),EasyPZ.addMode(function(t){var e={ids:["BRUSH_ZOOM","BRUSH_ZOOM_X","BRUSH_ZOOM_Y"],settings:{minDistance:3,delay:300,minTime:150},active:!1,data:{startPos:{x:0,y:0},el:null},onClickTouch:function(){1!==t.numberOfPointers?(e.active=!1,e.data.el&&(e.data.el.style.display="none")):(e.active=!0,e.data.el||(e.data.el=document.createElement("div"),e.data.el.style.border="1px solid #c00",e.data.el.style.background="rgba(200,50,50,0.3)",e.data.el.style.position="absolute",document.body.appendChild(e.data.el)),e.data.startPos={x:t.mousePos.x,y:t.mousePos.y},t.callbackAfterTimeoutOrMovement(e.settings.delay,e.settings.minDistance).then(function(o){e.active=1==t.numberOfPointers&&o>e.settings.minDistance,!e.active&&e.data.el&&(e.data.el.style.display="none")}),setTimeout(function(){1!==t.numberOfPointers&&(e.active=!1,e.data.el&&(e.data.el.style.display="none"))},e.settings.delay))},onMove:function(o){if(1!==t.numberOfPointers&&(e.active=!1,e.data.el&&(e.data.el.style.display="none")),e.active){var n=t.mousePos.x<e.data.startPos.x?t.mousePos.x:e.data.startPos.x,s=Math.abs(e.data.startPos.x-t.mousePos.x),a=t.mousePos.y<e.data.startPos.y?t.mousePos.y:e.data.startPos.y,i=Math.abs(e.data.startPos.y-t.mousePos.y);"BRUSH_ZOOM_X"===o.modeName?(a=t.el.getBoundingClientRect().top,i=t.height):"BRUSH_ZOOM_Y"===o.modeName&&(n=t.el.getBoundingClientRect().left,s=t.width),e.data.el.style.display="block",e.data.el.style.left=n+"px",e.data.el.style.top=a+"px",e.data.el.style.width=s+"px",e.data.el.style.height=i+"px"}},onClickTouchEnd:function(o){if(e.active&&(e.active=!1,e.data.el.style.display="none",Date.now()-t.mouseDownTime>e.settings.minTime)){var n={x:e.data.startPos.x+(t.mousePos.x-e.data.startPos.x)/2,y:e.data.startPos.y+(t.mousePos.y-e.data.startPos.y)/2},s={x:Math.abs(t.mousePos.x-e.data.startPos.x),y:Math.abs(t.mousePos.y-e.data.startPos.y)},a=void 0;"BRUSH_ZOOM"===o.modeName?a=1.3*Math.max(s.x/t.width,s.y/t.height):"BRUSH_ZOOM_X"===o.modeName?a=s.x/t.width*1.3:"BRUSH_ZOOM_Y"===o.modeName&&(a=s.y/t.height*1.3),t.onZoomed.emit({x:n.x,y:n.y,scaleChange:a,targetX:_this.width/2,targetY:_this.height/2})}}};return e}),EasyPZ.addMode(function(t){var e={ids:["DYNAMIC_ZOOM_X_STATIC","DYNAMIC_ZOOM_X_ORIGINAL_PAN","DYNAMIC_ZOOM_X_NORMAL_PAN","DYNAMIC_ZOOM_X_ADJUSTABLE","DYNAMIC_ZOOM_Y_STATIC","DYNAMIC_ZOOM_Y_ORIGINAL_PAN","DYNAMIC_ZOOM_Y_NORMAL_PAN","DYNAMIC_ZOOM_Y_ADJUSTABLE"],settings:{speed:.05,minDistance:3,delay:300,minDirectionPercentage:.7},active:!1,data:{startPos:{x:0,y:0},relativePos:{x:0,y:0},direction:"x"},onClickTouch:function(o){e.data.direction=o.modeName.substr("DYNAMIC_ZOOM_".length,1).toLowerCase();var n=e.data.direction;e.data.startPos={x:t.mousePos.x,y:t.mousePos.y},e.data.relativePos={x:0,y:0},t.resetAbsoluteScale.emit(null),t.callbackAfterTimeoutOrMovement(e.settings.delay,e.settings.minDistance).then(function(o){var s=Math.abs(e.data.startPos[n]-t.mousePos[n]);t.numberOfPointers>1||o<e.settings.minDistance||s/o<e.settings.minDirectionPercentage?e.active=!1:_this.mouseDownTime>_this.mouseUpTime&&(e.active=!0)})},onMove:function(o){if(e.active){var n={x:0,y:0},s=e.data.direction;EasyPZ.DIMENSIONS.forEach(function(e){n[e]=t.mousePos[e]-t.lastMousePos[e]});var a=t.mousePos[s]-e.data.startPos[s];if(!a)return;var i=Math.exp(-1*e.settings.speed*a);EasyPZ.DIMENSIONS.forEach(function(t){e.data.relativePos[t]+=n[t]*i});var r=void 0,c=null,u=null,l=void 0;"DYNAMIC_ZOOM_X_ADJUSTABLE"===o.modeName||"DYNAMIC_ZOOM_Y_ADJUSTABLE"===o.modeName?(r={x:e.data.startPos.x+e.data.relativePos.x,y:e.data.startPos.y+e.data.relativePos.y},c=t.mousePos.x,u=t.mousePos.y,l={x:t.mousePos.x,y:t.mousePos.y}):"DYNAMIC_ZOOM_X_STATIC"===o.modeName||"DYNAMIC_ZOOM_Y_STATIC"===o.modeName?l={x:e.data.startPos.x,y:e.data.startPos.y}:"DYNAMIC_ZOOM_X_NORMAL_PAN"===o.modeName||"DYNAMIC_ZOOM_Y_NORMAL_PAN"===o.modeName?l={x:e.data.startPos.x-e.data.relativePos.x,y:e.data.startPos.y-e.data.relativePos.y}:"DYNAMIC_ZOOM_X_ORIGINAL_PAN"!==o.modeName&&"DYNAMIC_ZOOM_Y_ORIGINAL_PAN"!==o.modeName||(l={x:t.mousePos.x,y:t.mousePos.y});var m=r||l;t.onZoomed.emit({x:m.x,y:m.y,absoluteScaleChange:i,targetX:c,targetY:u})}},onClickTouchEnd:function(){e.active=!1}};return e}),EasyPZ.addMode(function(t){var e={ids:["RUB_ZOOM_IN_X","RUB_ZOOM_IN_Y","RUB_ZOOM_OUT_X","RUB_ZOOM_OUT_Y"],settings:{speed:.02,minDistance:15,minDistanceAfterDirectionChange:10},active:!1,data:{direction:"x",hasChangedDirection:!1,hasChangedDirectionSign:0,hasChangedDirectionDirection:"x",zoomPosition:null,zoomReference:null},onClickTouch:function(){e.active=!1,e.data.zoomPosition={x:t.mousePos.x,y:t.mousePos.y},e.data.zoomReference={x:t.mousePos.x,y:t.mousePos.y}},onMove:function(o){if(e.data.zoomReference){var n=o.modeName.substr(o.modeName.length-1).toLowerCase(),s=Math.abs(e.data.zoomReference[n]-t.mousePos[n]),a=sign(t.lastMousePos[n]-e.data.zoomReference[n]),i=sign(t.mousePos[n]-t.lastMousePos[n]);0!=a&&0!=i&&a!=i&&s>e.settings.minDistance&&(e.data.zoomReference={x:t.mousePos.x,y:t.mousePos.y},s=0,e.data.hasChangedDirection=!0,e.data.hasChangedDirectionSign=i,e.data.hasChangedDirectionDirection=n),!e.active&&e.data.hasChangedDirection&&n==e.data.hasChangedDirectionDirection&&i!=e.data.hasChangedDirectionSign&&(e.data.hasChangedDirection=!1),e.data.hasChangedDirection&&s>e.settings.minDistanceAfterDirectionChange&&(e.active=!0);var r=Math.abs(t.mousePos[n]-t.lastMousePos[n]);if(e.active&&r){var c="RUB_ZOOM_IN"===o.modeName.substr(0,"RUB_ZOOM_IN".length)?1:-1,u={x:(t.mousePos.x+e.data.zoomReference.x)/2,y:(t.mousePos.y+e.data.zoomReference.y)/2},l=1-e.settings.speed*r*c;t.onZoomed.emit({x:u.x,y:u.y,scaleChange:l})}}},onClickTouchEnd:function(){e.active=!1,e.data.zoomPosition=null,e.data.zoomReference=null,e.data.hasChangedDirection=!1}};return e}),EasyPZ.addMode(function(t){var e={ids:["SHIFT_DRAG_ZOOM"],settings:{speed:.05},active:!1,data:{zoomPos:{x:0,y:0},currY:0},onClickTouch:function(o){o.event.shiftKey&&(e.active=!0,e.data.zoomPos.x=t.mousePos.x,e.data.zoomPos.y=t.mousePos.y,e.data.currY=t.mousePos.y)},onMove:function(){if(e.active){var o=t.mousePos.y-e.data.currY;e.data.currY=t.mousePos.y,t.onZoomed.emit({x:e.data.zoomPos.x,y:e.data.zoomPos.y,scaleChange:1-e.settings.speed*o})}},onClickTouchEnd:function(){e.active=!1}};return e});var easyPZLoader=new EasyPZLoader;easyPZLoader.checkElements(),window.addEventListener("load",function(){easyPZLoader.checkElements()}),window.setInterval(function(){easyPZLoader.checkElements()},500);
//# sourceMappingURL=/sm/0a2e8377f9dabed3e8eee9505ad15326021be4deafe34c308a87445d63d2a082.map